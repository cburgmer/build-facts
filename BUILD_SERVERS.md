# Build servers

Prerequisite is a download of build-facts:

    $ curl -LO https://github.com/cburgmer/build-facts/releases/download/0.5.3/build-facts-0.5.3-standalone.jar

## Concourse

Authentication with Concourse relies on Concourse's `fly` CLI. You can download
it from your Concourse instance's main page. To get started run

    $ fly login --target build-facts -c http://localhost:8080          # replace with your Concourse URL
    $ java -jar build-facts-0.5.3-standalone.jar concourse build-facts

See `java -jar build-facts-0.5.3-standalone.jar concourse --help` for more
options.


## GoCD

GoCD has a rich abstraction for pipelines, stages and jobs. build-facts will
provide a simpler view by aggregating the output of multiple GoCD jobs and
mapping a GoCD stage to a build-facts job.

Test results will be picked up automatically if
[published as a JUnit XML report file](https://www.go.cd/documentation/user/current/configuration/dev_upload_test_report.html).

    $ GOCD_USER="..." GOCD_PASSWORD="..." \
          java -jar build-facts-0.5.3-standalone.jar gocd http://localhost:8153/go    # replace with your GoCD URL

See `java -jar build-facts-0.5.3-standalone.jar gocd --help` for more options.


## Jenkins

Test results will be picked up if published via Jenkins' *Publish JUnit test
result report* option. Build inputs are taken for Git repositories and build
parameters as offered by the
[Parameterized Trigger Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin).

    $ JENKINS_USER="..." JENKINS_PASSWORD="..." \
          java -jar build-facts-0.5.3-standalone.jar jenkins http://localhost:8080    # replace with your Jenkins URL

See `java -jar build-facts-0.5.3-standalone.jar jenkins --help` for more
options.


## TeamCity

Test results will be automatically picked up via TeamCity's `/testOccurrences`
API. To make that data available, TeamCity jobs can be configured to either pick
up test results automatically if using built-in runners (like "Rake" with "RSpec
reporter" option selected), or via "Build Features" with "XML report processing"
configured to pick up `*.xml` test artifacts generated by the test run.

    $ TEAMCITY_USER="..." TEAMCITY_PASSWORD="..." \
          java -jar build-facts-0.5.3-standalone.jar teamcity http://localhost:8111 -p PROJECT_NAME    # replace with your TeamCity URL and project name

Due to https://youtrack.jetbrains.com/issue/TW-45063 the option via Rake & RSpec
will not provide a great level of detail for test results, so going the extra
mile and using the workaround provided in the issue linked will help here.

See `java -jar build-facts-0.5.3-standalone.jar teamcity --help` for more
options.
